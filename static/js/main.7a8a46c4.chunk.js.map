{"version":3,"sources":["web-3.js","contracts/sweepstake.js","components/Form-EnterCompetition.js","components/Entrants.js","components/EnteredCompetition.js","components/PickWinner.js","pages/entry.js","root-routes.js","reportWebVitals.js","index.js"],"names":["window","ethereum","request","method","web3","Web3","abi","sweepstakeContract","address","eth","Contract","Form","styled","form","FormField","div","ErrorText","Text","EnterSneakySweepForm","onSubmit","loading","error","clearError","useState","value","setValue","handleOnSubmit","e","a","preventDefault","TextInput","onChange","event","target","placeholder","Spinner","Button","primary","label","type","color","size","EmptyList","PlayerList","players","map","player","index","PlayerLink","rel","href","PlayerContainer","defaultProps","theme","global","colors","text","dark","ListContainer","EntrantsList","alignSelf","length","InfoText","EnteredCompetition","Box","alignContent","PickWinner","onClick","PageContainer","OwnerText","EntryPage","isInit","setIsInt","setPlayers","prize","setPrize","isSubmitting","setIsSubmitting","setError","isEntered","setIsEntered","playerAccount","setPlayerAccount","isAuth","setIsAuth","ownerAccount","setOwnerAccount","isPicking","setIsPicking","init","sweepstake","methods","owner","call","manager","getCurrentEntrants","getBalance","options","getAccounts","accounts","includes","useEffect","enterSweepstake","send","from","utils","toWei","console","log","onClickPickWinner","pickWinner","Header","background","pad","align","Heading","level","fromWei","gap","width","Card","Entrants","height","RootRoutes","path","exact","to","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","Grommet","grommet","document","getElementById"],"mappings":"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","file":"static/js/main.7a8a46c4.chunk.js","sourcesContent":["import Web3 from \"web3\";\n\nwindow.ethereum.request({ method: \"eth_requestAccounts\" });\n \nconst web3 = new Web3(window.ethereum);\n\nexport default web3;\n","import web3 from \"../web-3\";\nimport sweepstakeContract from \"./sweepstake-contract.json\";\n\nconst {abi ,address} = sweepstakeContract;\n\nexport default new web3.eth.Contract(abi, address);","import { Text, TextInput, Button, Spinner } from \"grommet\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\n\nconst EnterSneakySweepForm = ({ onSubmit, loading, error, clearError }) => {\n  const [value, setValue] = useState(\"\");\n\n  const onChange = (event) => {\n    error && clearError && clearError();\n    setValue(event.target.value);\n  };\n\n  const handleOnSubmit = async (e) => {\n    e.preventDefault();\n    onSubmit && onSubmit(value);\n  };\n  return (\n    <Form onSubmit={handleOnSubmit}>\n      <FormField>\n        <Text>Enter amount to enter Sneaky Sweep!</Text>\n      </FormField>\n      <FormField>\n        <TextInput\n          value={value}\n          onChange={onChange}\n          placeholder=\"Enter amount...\"\n        />\n      </FormField>\n      <FormField>\n        {loading ? (\n          <Spinner />\n        ) : (\n          <Button primary label=\"Enter Sneaky Sweep!\" type=\"submit\" />\n        )}\n      </FormField>\n      {error && (\n        <ErrorText color=\"red\" size=\"small\">\n          {error}\n        </ErrorText>\n      )}\n      <Text size=\"xsmall\">Note: Transaction may take up to 30 seconds</Text>\n    </Form>\n  );\n};\n\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst FormField = styled.div`\n  padding: 10px;\n`;\n\nconst ErrorText = styled(Text)`\n  margin-bottom: 10px;\n`;\n\nexport default EnterSneakySweepForm;\n","import styled from \"styled-components\";\nimport { Text } from \"grommet\";\nimport { defaultProps } from 'grommet'\nconst EntrantsList = ({ players }) => {\n  return (\n    <ListContainer>\n      <Text alignSelf=\"center\">Player Entrants!</Text>\n      {players.length === 0 ? (\n        <EmptyList />\n      ) : (\n        <PlayerContainer>\n          <PlayerList players={players} />\n        </PlayerContainer>\n      )}\n    </ListContainer>\n  );\n};\n\nconst EmptyList = () => {\n  return <div>There are currently no players!</div>;\n};\n\nconst PlayerList = ({ players }) => {\n  return players.map((player, index) => {\n    return (\n      <PlayerLink\n      key={index}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        href={`https://rinkeby.etherscan.io/address/${player}`}\n      >\n        {\" \"}\n        {player}\n      </PlayerLink>\n    );\n  });\n};\n\nconst PlayerContainer = styled.div`\n  margin-top: 10px;\n`;\n\nconst PlayerLink = styled.a`\n    color: ${defaultProps.theme.global.colors.text.dark};\n`\nconst ListContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport default EntrantsList;\n","import { Box, Text } from \"grommet\";\nimport styled from \"styled-components\";\nconst EnteredCompetition = () => {\n  return (\n    <Box alignContent=\"center\">\n      <InfoText>\n        You have entered the contest! You will be notified when it ends!\n      </InfoText>\n    </Box>\n  );\n};\n\nconst InfoText = styled(Text)`\n  text-align: center;\n`;\n\nexport default EnteredCompetition;\n","import { Button, Spinner } from \"grommet\";\n\nconst PickWinner = ({ onClick, loading }) => {\n  return (\n    <div>\n      {loading ? <Spinner /> : <Button label=\"Pick Winner\" onClick={onClick} />}\n    </div>\n  );\n};\n\nexport default PickWinner;\n","import web3 from \"../web-3\";\nimport styled from \"styled-components\";\nimport { useEffect, useState } from \"react\";\nimport { Header, Text, Heading, Card, Box } from \"grommet\";\nimport sweepstake from \"../contracts/sweepstake\";\nimport EnterSneakySweepForm from \"../components/Form-EnterCompetition\";\nimport EntrantsList from \"../components/Entrants\";\nimport EnteredCompetition from \"../components/EnteredCompetition\";\nimport PickWinner from \"../components/PickWinner\";\n\nfunction EntryPage() {\n  const [isInit, setIsInt] = useState(false);\n\n  const [players, setPlayers] = useState([]);\n  const [prize, setPrize] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const [error, setError] = useState(\"\");\n  const [isEntered, setIsEntered] = useState(false);\n  const [playerAccount, setPlayerAccount] = useState(\"\");\n  const [isAuth, setIsAuth] = useState(false);\n  const [ownerAccount, setOwnerAccount] = useState(\"\");\n  const [isPicking, setIsPicking] = useState(false);\n\n  const init = async () => {\n    // When  using metamask provider - No need to add From\n    const manager = await sweepstake.methods.owner().call();\n    const players = await sweepstake.methods.getCurrentEntrants().call();\n    const prize = await web3.eth.getBalance(sweepstake.options.address);\n\n    const accounts = await web3.eth.getAccounts();\n\n    if (manager === accounts[0]) {\n      setIsAuth(true);\n    }\n\n    setPlayerAccount(accounts[0]);\n\n    setIsEntered(players.includes(accounts[0]));\n    setOwnerAccount(manager);\n    setPlayers(players);\n    setPrize(prize);\n    setIsInt(true);\n  };\n  useEffect(() => {\n    init();\n  }, []);\n\n  useEffect(() => {\n    if (!isSubmitting || !isPicking) {\n      init();\n    }\n  }, [isSubmitting, isPicking]);\n\n  const handleOnSubmit = async (value) => {\n    if (!value) {\n      setError(\"Value can not be empty!\");\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      const accounts = await web3.eth.getAccounts();\n      // We will assume that first account is one we will use\n      await sweepstake.methods.enterSweepstake().send({\n        from: accounts[0],\n        value: web3.utils.toWei(value, \"ether\"),\n      });\n\n      setIsSubmitting(false);\n    } catch (e) {\n      console.log(\"hmm: \", e);\n      setIsSubmitting(false);\n      setError(\"There was an error submitting :(\");\n    }\n  };\n\n  const onClickPickWinner = async () => {\n    setIsPicking(true);\n    await sweepstake.methods.pickWinner().send({\n      from: ownerAccount,\n    });\n    setIsPicking(false);\n  };\n  const onClearError = () => setError(\"\");\n  if (!isInit) {\n    return (\n      <PageContainer>\n        <Header background=\"light-4\" pad=\"small\">\n          <Text size=\"small\">Connected Account: {playerAccount}</Text>\n        </Header>\n\n        <Box align=\"center\" height=\"large\" pad=\"large\">\n          LOADING\n        </Box>\n      </PageContainer>\n    );\n  }\n  return (\n    <PageContainer>\n        <Header background=\"light-4\" pad=\"small\">\n          <Text size=\"small\">Connected Account: {playerAccount}</Text>\n        </Header>\n      <Box align=\"center\">\n        <Heading>Sneaky Sweeps</Heading>\n        <Heading level=\"3\">\n          Current Prize: {web3.utils.fromWei(prize, \"ether\")} Ether\n        </Heading>\n      </Box>\n\n      <Box align=\"center\" pad=\"large\">\n        <Box gap=\"medium\" width=\"medium\">\n          <Card pad=\"medium\" background=\"dark-1\" gap=\"medium\">\n            {isEntered ? (\n              <EnteredCompetition />\n            ) : (\n              <EnterSneakySweepForm\n                onSubmit={handleOnSubmit}\n                loading={isSubmitting}\n                error={error}\n                clearError={onClearError}\n              />\n            )}\n          </Card>\n        </Box>\n        <Box align=\"center\" pad=\"medium\">\n          <Card pad=\"medium\" background=\"dark-1\" gap=\"medium\">\n            <EntrantsList players={players} />\n          </Card>\n        </Box>\n        {isAuth && players.length > 0 && (\n          <PickWinner loading={isPicking} onClick={onClickPickWinner} />\n        )}\n        <OwnerText>\n          Sneaky Sweep Owner:\n          <a\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            href={`https://rinkeby.etherscan.io/address/${ownerAccount}`}\n          >\n            {ownerAccount}\n          </a>\n        </OwnerText>\n      </Box>\n    </PageContainer>\n  );\n}\n\nconst PageContainer = styled.div`\n  height: 100%;\n`;\n\nconst OwnerText = styled(Text)`\n  margin-top: 100px;\n`;\n\nexport default EntryPage;\n","import { Switch,Route,Redirect } from \"react-router-dom\";\n\nimport EntryPage from \"./pages/entry\";\n\nconst RootRoutes = () => {\n    return <Switch>\n        <Route path=\"/\" exact>\n            <EntryPage />\n        </Route>\n\n        <Route>\n            <Redirect to=\"/\" />\n        </Route>\n    </Switch>\n}\n\nexport default RootRoutes;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./root-routes\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Grommet } from \"grommet\";\nimport { grommet } from \"grommet/themes\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Grommet theme={grommet}>\n      <HashRouter>\n        <App />\n      </HashRouter>\n    </Grommet>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}